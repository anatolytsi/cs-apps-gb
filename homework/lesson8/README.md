# Урок 8. Потоки

### Задание 1. На клиентской стороне реализовать прием и отправку сообщений с помощью потоков в P2P-формате (обмен сообщениями между двумя пользователями). Реализовать клиента с помощью потоков. Один поток - принимает сообщения, второй - держит инпут и их отправляет
### Задание 2. Сделать возможность отправки нескольких типов сообщений: presence, вступление/выход из конференции, отправка сообщения онлайн клиенту

##### Вывод сервера:

```console
2021-06-21 20:13:09,366 INFO     server     Сервер запущен по адресу :7777
2021-06-21 20:13:13,857 INFO     server     Соединение с клиентом установленно
2021-06-21 20:13:14,057 INFO     server     202: Пользователь user аутентифицирован
2021-06-21 20:13:29,809 INFO     server     Соединение с клиентом установленно
2021-06-21 20:13:30,011 INFO     server     202: Пользователь user1 аутентифицирован
2021-06-21 20:13:39,433 INFO     server     200: Пользователь user присоединился к чату geekbrains
2021-06-21 20:13:43,042 INFO     server     200: Пользователь user покинул чат geekbrains
2021-06-21 20:13:56,675 INFO     server     200: Сообщение от user1 к user доставлено
2021-06-21 20:14:19,528 INFO     server     200: Сообщение от user к user1 доставлено
2021-06-21 20:14:30,957 ERROR    server     400: Чата geeks не существует
Клиент отключился
Клиент отключился
```

##### Вывод клиента 1:

```console
2021-06-21 20:13:13,856 INFO     client     Клиент подключился к 127.0.0.1:7777
2021-06-21 20:13:13,857 INFO     client     Аутентификация user...
2021-06-21 20:13:14,057 INFO     client     Сервер ответил: 202 Пользователь user аутентифицирован
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера2021-06-21 20:13:14,067 INFO     client     Шлем presence...
2021-06-21 20:13:19,071 INFO     client     Шлем presence...
2021-06-21 20:13:24,072 INFO     client     Шлем presence...
2021-06-21 20:13:29,073 INFO     client     Шлем presence...
2021-06-21 20:13:34,075 INFO     client     Шлем presence...
jc
Введите название группы: geekbrains
2021-06-21 20:13:39,077 INFO     client     Шлем presence...
2021-06-21 20:13:39,254 INFO     client     Пользователь user присоединяется к чату geekbrains...
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:13:39,433 INFO     client     Сервер ответил: 200 Пользователь user присоединился к чату geekbrains
{'response': 200, 'alert': 'Пользователь user присоединился к чату geekbrains'}
lc
Введите название группы: geekbrains
2021-06-21 20:13:42,943 INFO     client     Пользователь user выходит из чата geekbrains...
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:13:43,043 INFO     client     Сервер ответил: 200 Пользователь user покинул чат geekbrains
{'response': 200, 'alert': 'Пользователь user покинул чат geekbrains'}
2021-06-21 20:13:44,079 INFO     client     Шлем presence...
2021-06-21 20:13:49,081 INFO     client     Шлем presence...
2021-06-21 20:13:54,082 INFO     client     Шлем presence...
2021-06-21 20:13:56,675 INFO     client     Сервер ответил: 200 Hello from user1!
{'response': 200, 'alert': 'Hello from user1!'}
2021-06-21 20:13:59,084 INFO     client     Шлем presence...
2021-06-21 20:14:04,085 INFO     client     Шлем presence...
m
Кому: user12021-06-21 20:14:09,087 INFO     client     Шлем presence...

Ваше сообщение: Hello from user to u as well!
2021-06-21 20:14:14,088 INFO     client     Шлем presence...
2021-06-21 20:14:19,090 INFO     client     Шлем presence...
2021-06-21 20:14:19,328 INFO     client     Шлем сообщение от user к user1: Hello from user to u as well!
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:14:19,528 INFO     client     Сервер ответил: 200 Hello from user to u as well!
{'response': 200, 'alert': 'Hello from user to u as well!'}
2021-06-21 20:14:19,539 INFO     client     Сервер ответил: 200 Сообщение от user к user1 доставлено
{'response': 200, 'alert': 'Сообщение от user к user1 доставлено'}
2021-06-21 20:14:24,091 INFO     client     Шлем presence...
lc
Введите название группы: 2021-06-21 20:14:29,093 INFO     client     Шлем presence...
geeks
2021-06-21 20:14:30,758 INFO     client     Пользователь user выходит из чата geeks...
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:14:30,959 ERROR    client     Сервер ответил ошибкой: 400 Чата geeks не существует
{}
2021-06-21 20:14:34,094 INFO     client     Шлем presence...
exit
```

##### Вывод клиента 2:

```console
2021-06-21 20:13:29,809 INFO     client     Клиент подключился к 127.0.0.1:7777
2021-06-21 20:13:29,809 INFO     client     Аутентификация user1...
2021-06-21 20:13:30,012 INFO     client     Сервер ответил: 202 Пользователь user1 аутентифицирован
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:13:30,028 INFO     client     Шлем presence...
2021-06-21 20:13:35,033 INFO     client     Шлем presence...
2021-06-21 20:13:40,034 INFO     client     Шлем presence...
2021-06-21 20:13:45,036 INFO     client     Шлем presence...
m
Кому: user
2021-06-21 20:13:50,037 INFO     client     Шлем presence...
Ваше сообщение: Hello from user1!
2021-06-21 20:13:55,039 INFO     client     Шлем presence...
2021-06-21 20:13:56,648 INFO     client     Шлем сообщение от user1 к user: Hello from user1!
Что вы хотите сделать? (jc) - вступить в конференцию, (lc) - выйти из конференции, (m) - отправить сообщение, (exit) - выход из мессенджера
2021-06-21 20:13:56,675 INFO     client     Сервер ответил: 200 Hello from user1!
{'response': 200, 'alert': 'Hello from user1!'}
2021-06-21 20:13:56,677 INFO     client     Сервер ответил: 200 Сообщение от user1 к user доставлено
{'response': 200, 'alert': 'Сообщение от user1 к user доставлено'}
2021-06-21 20:14:00,041 INFO     client     Шлем presence...
2021-06-21 20:14:05,042 INFO     client     Шлем presence...
2021-06-21 20:14:10,043 INFO     client     Шлем presence...
2021-06-21 20:14:15,045 INFO     client     Шлем presence...
2021-06-21 20:14:19,528 INFO     client     Сервер ответил: 200 Hello from user to u as well!
{'response': 200, 'alert': 'Hello from user to u as well!'}
2021-06-21 20:14:20,046 INFO     client     Шлем presence...
2021-06-21 20:14:25,048 INFO     client     Шлем presence...
2021-06-21 20:14:30,050 INFO     client     Шлем presence...
2021-06-21 20:14:35,052 INFO     client     Шлем presence...
2021-06-21 20:14:40,054 INFO     client     Шлем presence...
exit
```
